# 测试指南

## 核心功能测试清单

### 1. 基础计时功能

#### 测试场景 1：完整的工作番茄钟
1. 点击"开始"按钮
2. 等待倒计时结束（可在设置中调短时长方便测试，如 1 分钟）
3. **预期结果：**
   - ✅ 倒计时器正常倒计时
   - ✅ 倒计时结束后，顶部"已完成"数字 +1
   - ✅ 顶部"专注分钟"增加对应时长
   - ✅ 底部完成率进度条更新
   - ✅ 统计页面出现新的"工作"记录

#### 测试场景 2：暂停和恢复
1. 开始番茄钟
2. 点击"暂停"
3. 等待几秒
4. 点击"继续"
5. **预期结果：**
   - ✅ 暂停时计时器停止
   - ✅ 继续后从暂停的地方开始
   - ✅ 总时长不受影响

#### 测试场景 3：跳过
1. 开始番茄钟
2. 点击"跳过"
3. **预期结果：**
   - ✅ 计时器立即停止
   - ✅ 回到空闲状态
   - ✅ 不保存记录（因为未完成）

### 2. 自动控制功能

#### 测试场景 4：自动开始休息
1. 在设置中打开"自动开始休息"
2. 完成一个工作番茄钟
3. **预期结果：**
   - ✅ 工作结束后，1 秒后自动开始短休息
   - ✅ 倒计时器显示"短休息"状态

#### 测试场景 5：自动开始工作
1. 在设置中打开"自动开始工作"
2. 完成一个休息
3. **预期结果：**
   - ✅ 休息结束后，1 秒后自动开始工作
   - ✅ 倒计时器显示"工作中"状态

### 3. 长短休息判断

#### 测试场景 6：长短休息循环
1. 完成第 1 个番茄钟
   - **预期：** 进入短休息
2. 完成第 2 个番茄钟
   - **预期：** 进入短休息
3. 完成第 3 个番茄钟
   - **预期：** 进入短休息
4. 完成第 4 个番茄钟
   - **预期：** 进入**长休息**（15 分钟）
5. 完成第 5 个番茄钟
   - **预期：** 进入短休息（循环重新开始）

**规律：** 1,2,3 → 短休息；4 → 长休息；5,6,7 → 短休息；8 → 长休息...

### 4. 统计数据

#### 测试场景 7：统计数据同步
1. 完成几个番茄钟
2. 切换到"统计"标签
3. **预期结果：**
   - ✅ "今日概览"显示正确的完成数
   - ✅ "专注分钟"显示正确的总时长
   - ✅ "完成率"显示正确的百分比
   - ✅ "今日记录"显示所有会话（工作 + 休息）
   - ✅ 每个记录显示正确的时长
   - ✅ 工作记录用番茄图标，休息用咖啡/床图标

#### 测试场景 8：删除记录
1. 在统计页面点击某条记录的删除按钮
2. **预期结果：**
   - ✅ 记录被删除
   - ✅ 统计数据实时更新
   - ✅ 主页面的统计也同步更新

### 5. 设置功能

#### 测试场景 9：调整时长
1. 在设置中调整工作时长为 1 分钟（方便测试）
2. 开始一个番茄钟
3. **预期结果：**
   - ✅ 倒计时器显示 1 分钟
   - ✅ 1 分钟后结束

#### 测试场景 10：调整每日目标
1. 在设置中将每日目标设为 4
2. 完成 2 个番茄钟
3. **预期结果：**
   - ✅ 主页面底部完成率显示 50%
   - ✅ 进度条显示一半

#### 测试场景 11：通知测试
1. 在设置中点击"发送测试通知"
2. **预期结果：**
   - ✅ 收到通知权限请求（首次）
   - ✅ 收到测试通知

### 6. 深色模式

#### 测试场景 12：主题切换
1. 在系统设置中切换深色/浅色模式
2. **预期结果：**
   - ✅ 应用主题自动切换
   - ✅ 所有页面颜色正确
   - ✅ 番茄红主题色保持一致

## 快速测试建议

为了加快测试速度，建议：

1. **调短时长：**
   - 工作时长：1 分钟
   - 短休息：30 秒
   - 长休息：1 分钟

2. **开启自动控制：**
   - 打开"自动开始休息"
   - 打开"自动开始工作"

3. **完整流程测试（约 5-10 分钟）：**
   - 开始第 1 个番茄钟 → 自动短休息 → 自动工作
   - 完成第 2 个番茄钟 → 自动短休息 → 自动工作
   - 完成第 3 个番茄钟 → 自动短休息 → 自动工作
   - 完成第 4 个番茄钟 → 自动**长休息** ✅

4. **验证数据：**
   - 主页面：已完成 = 4，专注分钟 = 4
   - 统计页面：4 个工作记录 + 4 个休息记录

## 调试日志

在开发模式下，控制台会输出：
```
Session completed: work, duration: 25 min, completed: true
Auto start break: completed=1, isLong=false
Session completed: short_break, duration: 5 min, completed: true
...
```

## 已知问题

无已知问题。所有核心功能已修复并测试通过。

## 报告问题

如发现问题，请记录：
1. 操作步骤
2. 预期结果
3. 实际结果
4. 控制台日志（如有）
